# ============================================================================
# SCRAPER PRO - CONFIGURATION TEMPLATE FIXED v2.1
# Version: 2.1 Production-Ready avec toutes les variables
# COPIEZ ce fichier vers .env ET MODIFIEZ les valeurs
# ============================================================================

# ==========================================================================
# BASE DE DONNÉES POSTGRESQL
# ==========================================================================
POSTGRES_DB=scraper_pro
POSTGRES_USER=scraper_admin
POSTGRES_PASSWORD=CHANGEZ_MOI_MOT_DE_PASSE_FORT_123456
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ==========================================================================
# REDIS - CACHE ET COORDINATION (AJOUTÉ)
# ==========================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGEZ_MOI_REDIS_PASSWORD_123456
REDIS_USE_SSL=false
REDIS_NAMESPACE=scraperpro

# ==========================================================================
# DASHBOARD STREAMLIT  
# ==========================================================================
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=CHANGEZ_MOI_DASHBOARD_PASSWORD_123
DASHBOARD_PORT=8501

# Ports
HTTP_PORT=80
HTTPS_PORT=443

# ==========================================================================
# SCRAPY CONFIGURATION
# ==========================================================================
SCRAPY_CONCURRENT_REQUESTS=8
SCRAPY_DOWNLOAD_DELAY=1.0
SCRAPY_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# ==========================================================================
# PLAYWRIGHT
# ==========================================================================
PLAYWRIGHT_BROWSER_TYPE=chromium
PLAYWRIGHT_DEFAULT_NAVIGATION_TIMEOUT=30000
PLAYWRIGHT_LAUNCH_OPTIONS={"headless":true}

# ==========================================================================
# PERFORMANCE ET LIMITES
# ==========================================================================
JS_PAGES_LIMIT=1000
MAX_PAGES_PER_DOMAIN=25
WORKER_TIMEOUT=1800
MAX_RETRIES=3

# ==========================================================================
# WORKER ET SCHEDULER
# ==========================================================================
POLL_INTERVAL_SEC=5
RETRY_BACKOFF_BASE=2.0
JOB_TIMEOUT_SEC=1800
HEALTH_CHECK_INTERVAL=60

# ==========================================================================
# PROXY MANAGEMENT (AJOUTÉ)
# ==========================================================================
PROXY_ROTATION_DEFAULT_MODE=per_spider
PROXY_STICKY_TTL_DEFAULT=180
PROXY_RPS_DATACENTER_DEFAULT=2.0
PROXY_RPS_RESIDENTIAL_DEFAULT=0.5
PROXY_COOLDOWN_INITIAL=30
PROXY_CIRCUIT_BREAKER_THRESHOLD=5
PROXY_CONFIG_PATH=config/proxy_config.json

# ==========================================================================
# SYSTÈME
# ==========================================================================
TZ=Europe/Paris
LOG_LEVEL=INFO
ENVIRONMENT=production
SECRET_KEY=CHANGEZ_MOI_32_CARACTERES_MINIMUM_ABCD1234567890

# ==========================================================================
# MONITORING (optionnel)
# ==========================================================================
ENABLE_MONITORING=false
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_PASSWORD=CHANGEZ_MOI_GRAFANA_PASSWORD

# ==========================================================================
# BACKUP ET MAINTENANCE
# ==========================================================================
BACKUP_RETENTION_DAYS=30
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE=daily

# ==========================================================================
# CONNEXIONS DB - Paramètres pour éviter "connection already closed"
# ==========================================================================
POSTGRES_CONNECT_TIMEOUT=30
POSTGRES_STATEMENT_TIMEOUT=300000
CONNECTION_POOL_SIZE=10
MAX_CONNECTIONS=50
DB_POOL_MIN=1
DB_POOL_MAX=10

# ==========================================================================
# CACHE ET ANTI-DOUBLONS (AJOUTÉ)
# ==========================================================================
URL_CACHE_TTL_SECONDS=3600
CONTENT_HASH_ENABLED=true
REVISIT_DELAY_HOURS=168
CHECKPOINT_INTERVAL_PAGES=100

# ==========================================================================
# CIRCUIT BREAKERS ET RATE LIMITING (AJOUTÉ)
# ==========================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DOMAIN_DEFAULT=2.0
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURES=5
CIRCUIT_BREAKER_COOLDOWN_SECONDS=600
ANTI_DUPLICATE_ENABLED=true
CHECKPOINT_ENABLED=true

# ==========================================================================
# SÉCURITÉ ET SSL (AJOUTÉ)
# ==========================================================================
SSL_CERT_PATH=./ssl/fullchain.pem
SSL_KEY_PATH=./ssl/privkey.pem
FORCE_HTTPS=false
SESSION_TIMEOUT=3600
MAX_LOGIN_ATTEMPTS=5
AUDIT_LOGS_ENABLED=true

# ==========================================================================
# EMAIL ALERTS (optionnel)
# ==========================================================================
ENABLE_EMAIL_ALERTS=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USER=alerts@company.com
SMTP_PASSWORD=app_password_here
ALERT_RECIPIENTS=admin@company.com,devops@company.com

# ==========================================================================
# DASHBOARD CONFIGURATION AVANCÉE (AJOUTÉ)
# ==========================================================================
ENABLE_PROXY_MANAGEMENT=true
ENABLE_ADVANCED_STATS=true
ENABLE_REAL_TIME_MONITORING=true
DASHBOARD_KEYWORDS=

# ==========================================================================
# TIMEOUTS ET RETRY (AJOUTÉ)
# ==========================================================================
REQUEST_TIMEOUT=30
CONNECTION_TIMEOUT=10
READ_TIMEOUT=30
RETRY_ATTEMPTS=3
RETRY_DELAY=5

# ==========================================================================
# EXEMPLE D'UTILISATION:
# ==========================================================================
# 1. cp .env.example .env
# 2. Éditez .env avec vos vraies valeurs
# 3. docker compose up -d
# ============================================================================